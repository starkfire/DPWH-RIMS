(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-152eeb35"],{"1dde":function(e,t,a){var i=a("d039"),r=a("b622"),n=a("2d00"),s=r("species");e.exports=function(e){return n>=51||!i((function(){var t=[],a=t.constructor={};return a[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"4de4":function(e,t,a){"use strict";var i=a("23e7"),r=a("b727").filter,n=a("1dde"),s=a("ae40"),o=n("filter"),l=s("filter");i({target:"Array",proto:!0,forced:!o||!l},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(e,t,a){var i=a("861d"),r=a("e8b5"),n=a("b622"),s=n("species");e.exports=function(e,t){var a;return r(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?i(a)&&(a=a[s],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},ae40:function(e,t,a){var i=a("83ab"),r=a("d039"),n=a("5135"),s=Object.defineProperty,o={},l=function(e){throw e};e.exports=function(e,t){if(n(o,e))return o[e];t||(t={});var a=[][e],c=!!n(t,"ACCESSORS")&&t.ACCESSORS,u=n(t,0)?t[0]:l,d=n(t,1)?t[1]:void 0;return o[e]=!!a&&!r((function(){if(c&&!i)return!0;var e={length:-1};c?s(e,1,{enumerable:!0,get:l}):e[1]=1,a.call(e,u,d)}))}},b64b:function(e,t,a){var i=a("23e7"),r=a("7b0b"),n=a("df75"),s=a("d039"),o=s((function(){n(1)}));i({target:"Object",stat:!0,forced:o},{keys:function(e){return n(r(e))}})},b727:function(e,t,a){var i=a("0366"),r=a("44ad"),n=a("7b0b"),s=a("50c4"),o=a("65f0"),l=[].push,c=function(e){var t=1==e,a=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d;return function(p,m,h,b){for(var g,v,y=n(p),S=r(y),L=i(m,h,3),w=s(S.length),V=0,k=b||o,M=t?k(p,w):a?k(p,0):void 0;w>V;V++)if((f||V in S)&&(g=S[V],v=L(g,V,y),e))if(t)M[V]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return V;case 2:l.call(M,g)}else if(u)return!1;return d?-1:c||u?u:M}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},cc2c:function(e,t,a){"use strict";var i=a("e54e"),r=a.n(i);r.a},ddb0:function(e,t,a){var i=a("da84"),r=a("fdbc"),n=a("e260"),s=a("9112"),o=a("b622"),l=o("iterator"),c=o("toStringTag"),u=n.values;for(var d in r){var f=i[d],p=f&&f.prototype;if(p){if(p[l]!==u)try{s(p,l,u)}catch(h){p[l]=u}if(p[c]||s(p,c,d),r[d])for(var m in n)if(p[m]!==n[m])try{s(p,m,n[m])}catch(h){p[m]=n[m]}}}},ddf8:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"asset-manager"},[a("a-row",{attrs:{gutter:12}},[a("a-col",{attrs:{span:20}},[a("p",{attrs:{id:"header"}},[e._v("Manager")])]),a("a-col",{attrs:{span:2}},[a("br"),a("a-button",{attrs:{type:"primary"},on:{click:function(){return e.postVisible=!0}}},[e._v("Post Data")]),a("a-modal",{attrs:{title:"Post Data",centered:""},on:{ok:function(){return e.postVisible=!1}},model:{value:e.postVisible,callback:function(t){e.postVisible=t},expression:"postVisible"}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"Type"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"Please select the type"}]}],expression:"['type', { rules: [{ required: true, message: 'Please select the type' }] }]"}]},[a("a-radio-button",{attrs:{value:"guardRail"}},[e._v("Guard Rail")]),a("a-radio-button",{attrs:{value:"signage"}},[e._v("Signage")])],1)],1),a("a-form-item",{attrs:{label:"Value"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["value"],expression:"['value']"}]})],1),a("a-row",{attrs:{gutter:12}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"Latitude"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["latitude"],expression:"['latitude']"}]})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"Longitude"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["longitude"],expression:"['longitude']"}]})],1)],1)],1),a("a-form-item",{attrs:{label:"Address"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"Please specify an address"}]}],expression:"['address', { rules: [{ required: true, message: 'Please specify an address' }] }]"}]})],1),a("a-form-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("Submit")])],1)],1)],1)],1),a("a-col",{attrs:{span:2}},[a("br"),a("a-button",{attrs:{type:"primary"},on:{click:function(){return e.modalVisible=!0}}},[e._v("Upload")]),a("a-modal",{attrs:{title:"Upload Data Spreadsheet",centered:""},on:{ok:function(){return e.modalVisible=!1}},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("a-upload",{attrs:{name:"file",accept:".csv",action:"http://127.0.0.1:3000/api/asset/upload",multiple:!1},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"cloud-upload"}}),e._v("Upload")],1)],1)],1),a("el-col",{attrs:{span:14}},[a("el-alert",{attrs:{title:"CSV Files Only",type:"warning",description:"Make sure your CSV file follows the prescribed format","show-icon":"",closable:!1}})],1)],1)],1)],1)],1),a("a-row",{staticStyle:{"margin-bottom":"75px"}},[a("a-table",{attrs:{columns:e.columns,rowKey:function(e){return e._id},dataSource:e.entriesVisible,loading:e.loading,pagination:!1},scopedSlots:e._u([{key:"date",fn:function(t){return a("span",{},[e._v(" "+e._s(t.split("T")[0])+" ")])}},{key:"time",fn:function(t){return a("span",{},[e._v(" "+e._s(t.split("T")[1].split(".")[0])+" ")])}},{key:"type",fn:function(t){return a("span",{},[e._v(" "+e._s(t.toUpperCase())+" ")])}}])}),a("br"),a("center",[a("div",[e.loadingMore?a("a-spin"):a("a-button",{on:{click:e.onLoadMore}},[e._v("Load More")])],1)])],1)],1)},r=[],n=(a("4de4"),a("b64b"),a("d3b7"),a("ddb0"),a("bc3a")),s=[{title:"Date",key:"date",dataIndex:"date",scopedSlots:{customRender:"date"}},{title:"Time",key:"time",dataIndex:"date",scopedSlots:{customRender:"time"}},{title:"Type",key:"type",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"Value",key:"value",dataIndex:"value"}],o={name:"Manager",data:function(){return{loading:!0,loadingMore:!1,showLoadingMore:!0,entries:[],entriesVisible:[],count:0,remaining:0,postVisible:!1,modalVisible:!1,columns:s}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"post_data"})},mounted:function(){this.getCount(),this.getInitialData()},methods:{getCount:function(){var e=this;n["get"]("http://127.0.0.1:3000/api/asset/").then((function(t){var a=Object.keys(t.data);e.count=a.filter((function(e){return e})).length}))},getInitialData:function(){var e=this;this.fetchData((function(t){if(e.loading=!1,e.entries=t.data,e.count<5){for(var a=0;a<e.count;a++)e.entriesVisible.push(e.entries[a]);e.showLoadingMore=!1}else{for(var i=0;i<5;i++)e.entriesVisible.push(e.entries[i]);e.remaining=e.entries.length-e.entriesVisible.length}}))},fetchData:function(e){var t=this;n["get"]("http://127.0.0.1:3000/api/asset/").then((function(t){e(t)})).catch((function(e){return t.handleNetworkError(e)}))},onLoadMore:function(){if(this.loadingMore=!0,this.remaining<5){for(var e=0;e<this.remaining;e++)this.entriesVisible.push(this.entries[e]);this.showLoadingMore=!1,this.remaining=0}else{for(var t=0;t<5;t++)this.entriesVisible.push(this.entries[t]);this.loadingMore=!1,this.remaining=this.entries.length-this.entriesVisible.length,this.$nextTick((function(){window.dispatchEvent(new Event("resize"))}))}},handleNetworkError:function(e){this.loading=!1,this.showLoadingMore=!1,this.$notification.config({placement:"bottomLeft"}),this.$notification["error"]({message:"Cannot Connect to API",description:"Please check if the API is running and accessible"})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e){var i=t.$message.loading("Publishing data...",0);setTimeout(i,1e3);var r={type:a["type"],value:a["value"],lat:a["latitude"],lon:a["longitude"],address:a["address"]};n({method:"POST",url:"http://127.0.0.1:3000/api/asset",headers:{"Content-Type":"application/json"},data:r}).then((function(e){t.$message.destroy(),t.$message.success("Data Published")})).catch((function(e){t.$message.error("Unknown error occurred")}))}}))},handleRemove:function(e,t){console.log(e,t)},handleChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?this.$message.success("Upload Success"):"error"===e.file.status&&this.$message.error("".concat(e.file.response.message))}}},l=o,c=(a("cc2c"),a("2877")),u=Object(c["a"])(l,i,r,!1,null,"0180b844",null);t["default"]=u.exports},e54e:function(e,t,a){},e8b5:function(e,t,a){var i=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-152eeb35.eb4761c5.js.map